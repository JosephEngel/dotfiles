#!/bin/bash
# Script to create symlinks to local dotfiles and copy various themes to local machine

#
shopt -s expand_aliases dotglob

# cd into dotfiles repo directory
cd "$(dirname "$0")/files"

# Test: verify pwd
echo "Current location: `pwd`"

# Set variable for files directory
#FILES="$(pwd)/files/.[^.]*"
#FILES="$(pwd)/files/*"

FILES="*"

# Iterate through FILESDIR
for x in $FILES; do
  echo "File: $x"
  if [ -d $x ]; then
    #echo "$x is a directory. Skipping"
    cp -faTs "$(pwd)/$x" "$HOME/$x"
    echo ""
  elif [ -e $x ]; then
    if [ -e "$HOME/$x" ]; then
      echo "$HOME/$x already exists. Do you want to overwrite? (y/n)"
      read CHOICE
      if [ "$CHOICE" == "Y" ] || [ "$CHOICE" == "y" ]; then
        #ln -s "$x" "$HOME/$x"
	cp -faTs "$(pwd)/$x" "$HOME/$x"
	echo "file $x overwritten. Link successful."
	echo ""
      elif [ "$CHOICE" = "N" ] || [ "$CHOICE" == "n" ]; then
        echo "Skipping file.."
	echo ""
      else
        echo "Invalid input. Skipping file $x"
	echo ""
      fi
    else
      ln -s "$(pwd)/$x" "$HOME/$x"
      echo "file $x link successful."
      echo ""
    fi
  else
    echo "Something went wrong. file not a file or directory."
    echo ""
  fi
done



